<?xml version="1.0" encoding="utf-8" ?>
<feed xmlns="http://www.w3.org/2005/Atom">
	<title>Charlie Park</title>
	<link href="http://charliepark.org" />
	<link href="http://charliepark.org/feed/" rel="self" />
	<id>http://charliepark.org</id>
	<updated>2011-07-11T00:00:00-04:00</updated>
	<author><name>Charlie Park</name></author>
	
	<entry>
		<title>Edward Tufte&rsquo;s &ldquo;Slopegraphs&rdquo;</title>
		<link href="/slopegraphs" />
		<id>/slopegraphs</id>
		<published>2011-07-11T00:00:00-04:00</published>
		<updated>2011-07-11T00:00:00-04:00</updated>
		<content type="xhtml">
			<div xmlns="http://www.w3.org/1999/xhtml">
				<p>Back in 2004, Edward Tufte defined and developed the concept of a &#8220;<a href='http://www.edwardtufte.com/bboard/q-and-a-fetch-msg?msg_id=0001OR&amp;topic_id=1'>sparkline</a>&#8221;. Odds are good that &#8212; if you&#8217;re reading this &#8212; you&#8217;re familiar with them and how popular they&#8217;ve become.</p>

<p>What&#8217;s interesting is that <strong>over 20 years before sparklines came on the scene, Tufte developed a different type of data visualization that didn&#8217;t fare nearly as well</strong>. To date, in fact, I&#8217;ve only been able to find <em>three</em> examples of it, and even they aren&#8217;t completely in line with his vision.</p>

<p>It&#8217;s curious that it hasn&#8217;t become more popular, as the chart type is quite elegant and aligns with all of Tufte&#8217;s best practices for data visualization, and was created by the master of information design. Why haven&#8217;t these charts (christened &#8220;slopegraphs&#8221; by Tufte about a month ago) taken off the way sparklines did?</p>

<p>In this post, we&#8217;re going to look at slopegraphs &#8212; what they are, how they&#8217;re made, why they haven&#8217;t seen a massive uptake so far, and why I think they&#8217;re about to become much more popular in the near future.</p>

<h2 id='the_tablegraphic'>The Table-Graphic</h2>

<p>In his 1983 book <em><a href='http://www.amazon.com/gp/product/0961392142/ref=as_li_ss_tl?ie=UTF8&amp;tag=charpark-20&amp;linkCode=as2&amp;camp=217145&amp;creative=399369&amp;creativeASIN=0961392142'>The Visual Display of Quantitative Information</a></em>, Tufte displayed a new type of data graphic.</p>
<img src='/images/slopegraphs/slopegraph.gif' style='width:500px' /><cite>Tufte, Edward. <em>The Visual Display of Quantitative Information</em>.<br />Cheshire, Connecticut: Graphics Press; 1983; p. 158</cite>
<p>As Tufte notes in his book, this type of chart is useful for seeing:</p>

<ul>
<li>the hierarchy of the countries in both 1970 and 1979 [the order of the countries]</li>

<li>the specific numbers associated with each country in each of those years [the data value next to their names]</li>

<li>how each country&#8217;s numbers changed over time [each country&#8217;s slope]</li>

<li><strong>how each country&#8217;s rate of change compares to the other countries&#8217; rates of change</strong> [the slopes compared with one another]</li>

<li>any notable deviations in the general trend (notice Britain in the above example) [aberrant slopes]</li>
</ul>

<p>This chart does this in a remarkably minimalist way. <strong>There&#8217;s absolutely zero non-data ink.</strong></p>

<p>(One important thing to note is that this chart shows <strong>the same types of data on the left and right sides, using the same units of measurement.</strong> I&#8217;ll come back to this later.)</p>

<p>So, anyway, Professor Tufte made this new kind of graph. Unlike sparklines, though, it didn&#8217;t really get picked up. Anywhere.</p>

<p>My theory on this lack of response is three-fold:</p>
<ol><li>It didn't have a name. (He just referenced it as a "table-graphic" at the time.)</li>
<li>It was a totally new concept. (Where sparklines are easily understood as "an axis-less line chart, scaled down (and kind of cute)", this "table-graphic" is something new.)</li>
<li>It's a <s>little</s> <u>good deal</u> more complicated to draw. (More on that at the end.)</li>
</ol>
<h3 id='a_superclose_zoomin_on_a_line_chart'>A Super-Close Zoom-In On A Line Chart</h3>

<p>A quick aside: The best way I&#8217;ve found to describe these table-graphics is this: It&#8217;s like a super-close zoom-in on a line chart, with a little extra labeling.</p>

<p>Imagine you have a line chart, showing the change in European countries&#8217; population over time. Each country has a line, zigzagging from January (on the left) to December (on the right). Each country has 12 points across the chart. The lines zigzag up and down across the chart. Now, let&#8217;s say you zoomed in to <em>just</em> the June-July segment of the chart, and you labeled the left and right sides of each country&#8217;s June-July lines (with the country&#8217;s name, and the specific number at each data point).</p>

<p>That&#8217;s it. Fundamentally, that&#8217;s all a table-graphic is.</p>

<h2 id='hierarchical_tablegraphics_in_the_wild'>Hierarchical Table-Graphics In The Wild</h2>

<p>Where sparklines found their way into products at Google (<a href='http://code.google.com/apis/chart/interactive/docs/gallery/imagesparkline.html'>Google Charts</a> and Google Finance) and Microsoft (<a href='http://charliepark.tumblr.com/post/809003601/me-getting-annoyed-by-microsofts-abuse-of-copyright'>grrr</a>), and even saw some action from a pre-jQuery John Resig (<a href='http://ejohn.org/projects/jspark/'>jspark.js</a>), this table-graphic thing saw essentially zero uptake.</p>

<p>At-present, Googling for &#8221;<a href='http://www.google.com/search?q=tufte+&quot;table-graphic&quot;'>tufte &#8220;table-graphic&#8221;</a>&#8221; yields a whopping 83 results, most of which have nothing to do with this technique.</p>

<p>Actually, since Tufte&#8217;s 1983 book, I&#8217;ve found <em>three</em> non-Tuftian examples (<em>total</em>). And even they don&#8217;t really do what Tufte laid out with his initial idea.</p>

<p>Let&#8217;s look at each of them.</p>

<h3 id='ben_frys_baseball_chart'>Ben Fry&#8217;s Baseball Chart</h3>

<p>The first we&#8217;ll look at came from Processing developer / data visualization designer <a href='http://benfry.com/'>Ben Fry</a>, who developed a chart showing baseball <a href='http://benfry.com/salaryper/'>team performance vs. total team spending</a>:</p>
<img src='/images/slopegraphs/benfry_salaryper.png' style='width:500px' /><cite><a href='http://benfry.com/salaryper/'>http://benfry.com/salaryper/</a></cite>
<p>A version of this graphic was included in his 2008 book <em><a href='http://www.amazon.com/gp/product/0596514557/ref=as_li_ss_tl?ie=UTF8&amp;tag=charpark-20&amp;linkCode=as2&amp;camp=217145&amp;creative=399369&amp;creativeASIN=0596514557'>Visualizing Data</a></em>, but I believe he shared it online before then.</p>

<p>Anyway, you can see each major-league baseball team on the left, with their win/loss ratio on the left and their annual budget on the right. Between them is a sloped line showing how their ordering in each column compares. Lines angled up (red) suggest a team that is spending more than their win ratio suggests they should be, where blue lines suggest the team&#8217;s getting a good value for their dollars. The steeper the blue line, the more wins-per-dollar.</p>

<p>There are two key distinctions between Tufte&#8217;s chart and Fry&#8217;s chart.</p>

<p>First: Fry&#8217;s baseball chart is really just comparing <em>order</em>, not scale. The top-most item on the left is laid out with the same vertical position as the top-most item on the right, and so on down the list.</p>

<p>Second: Fry&#8217;s is comparing two different variables: win ratio and team budget. Tufte&#8217;s looks at a single variable, over time. (To be fair, Fry&#8217;s <em>does</em> show the change over time, but only in a dynamic, online version, where the orders change over time as the season progresses. The static image above doesn&#8217;t concern itself with change-over-time.)</p>

<p>If you want to get technical, Fry&#8217;s chart is essentially a &#8220;forced-rank <a href='http://www.b-eye-network.com/view/3355'>parallel coordinates plot</a>&#8221; with just two metrics.</p>

<p>Another difference I should note: This type of forced-rank chart doesn&#8217;t have any obvious allowance for ties. That is, if two items on the chart have the same datum value (as is the case in 11 of the 30 teams above), the designer (or the algorithm, if the process is automated) has to choose one item to place above the other. (For example, see the Reds and the Braves, at positions 6 and 7 on the left of the chart.) In Fry&#8217;s case, he uses the team with the lower salary as the &#8220;winner&#8221; of the tie. But this isn&#8217;t obvious to the reader.</p>

<p>In <em><a href='http://www.amazon.com/gp/product/0596514557/ref=as_li_ss_tl?ie=UTF8&amp;tag=charpark-20&amp;linkCode=as2&amp;camp=217145&amp;creative=399369&amp;creativeASIN=0596514557'>Visualizing Data</a></em>, Fry touches on the &#8220;forcing a rank&#8221; question (p. 118), noting that at the end of the day, he <em>wants</em> a ranked list, so a scatterplot using the X and Y axes is less effective of a technique (as the main point with a scatterplot is simply to display a correlation, not to order the items). I&#8217;m not convinced, but I am glad he was intentional about it. I also suspect that &#8212; because the list is generated algorithmically &#8212; it was easier to do it and avoid label collisions this way.</p>

<p>Nevertheless, I do think it&#8217;s a good visualization.</p>

<h3 id='the_national_geographic_magazine_lifeexpectancy_chart'>The <em>National Geographic Magazine</em> Life-Expectancy Chart</h3>

<p>In 2009, <a href='http://oliveruberti.com/'>Oliver Uberti</a> at <em>National Geographic Magazine</em> released a chart showing the average life expectancy at birth of citizens of different countries, comparing that with what each nation spends on health care per person:</p>
<img src='/images/slopegraphs/natgeo.jpg' style='width:500px' /><cite><a href='http://blogs.ngm.com/blog_central/2009/12/the-cost-of-care.html'>http://blogs.ngm.com/blog_central/2009/12/the-cost-of-care.html</a></cite>
<p>Like Fry&#8217;s chart, Uberti&#8217;s chart uses two different variables. <em>Unlike</em> Fry&#8217;s chart, Uberti&#8217;s <em>does</em> use different scales. While that resolves the issue I noted about having to force-rank identical datapoints, it introduces a new issue: dual-scaled axes.</p>

<p>By selecting the two scales used, the designer of the graph &#8212; whether intentionally or not &#8212; is introducing <em>meaning</em> where there might not actually be any.</p>

<p>For example, should the right-side data points have been spread out so that the highest and lowest points were as high and low as the Switzerland and Mexico labels (the highest and lowest figures, apart from the US) on the left? Should the scale been adjusted so that the Switzerland and/or Mexico lines ran horizontally? Each of those options would have affected the layout of the chart. I&#8217;m not saying that Uberti <em>should</em> have done that &#8212; just that a designer needs to tread very carefully when using two different scales on the same axis.</p>

<p>(Stephen Few discusses this concept of dual-scaled axes &#8212; although he isn&#8217;t talking about this chart type &#8212; in <a href='http://www.perceptualedge.com/articles/visual_business_intelligence/dual-scaled_axes.pdf'>his March 2008 newsletter</a>.)</p>

<p>A few bloggers (<a href='http://peltiertech.com/WordPress/graphing-the-cost-of-health-care/'>Jon Peltier</a>, for example) criticized the NatGeo chart, noting that, like the Fry chart above, it was an Inselberg-style parallel-coordinates plot, and that a better option would be a scatter plot. (I disagree that it&#8217;s <em>really</em> a parallel-coordinates plot, as parallel-coordinate plots usually compress everything into a unified vertical axis height, so the scale is somewhat pre-determined. I digress.)</p>

<p>In <a href='http://blogs.ngm.com/blog_central/2010/01/the-other-health-care-debate-lines-vs-scatterplot.html'>a great response on the NatGeo blog</a>, Uberti then re-drew the data in a scatter plot:</p>
<img src='/images/slopegraphs/natgeo_scatter.jpg' style='width:500px' />
<p>Uberti also gave some good reasons for drawing the graph the way he did originally, with his first point being that &#8220;many people have difficulty reading scatter plots. When we produce graphics for our magazine, we consider a wide audience, many of whose members are not versed in visualization techniques. For most people, it&#8217;s considerably easier to understand an upward or downward line than relative spatial positioning.&#8221;</p>

<p>I agree with him on that. Scatterplots reveal more data, and they reveal the relationships better (and Uberti&#8217;s scatterplot is really good, apart from a few quibbles I have about his legend placement). But <strong>scatterplots can be tricky to parse</strong>, especially for laymen.</p>

<p>Note, for example, that in the scatter plot, it&#8217;s hard at first to see the cluster of bubbles in the bottom-left corner of the chart, and the eye&#8217;s initial &#8220;read&#8221; of the chart is that a best-fit line would run along that top-left-to-bottom-right string of bubbles from Japan to Luxembourg. In reality, though, that line would be absolutely wrong, and the best-fit would run from the bottom-left to the upper-right.</p>

<p>Also, the entire <em>point</em> of the chart is to show the US&#8217;s deviant spending pattern, but in the scatter plot, the eye&#8217;s activity centers around that same cluster of bubbles, and the US&#8217;s bubble on the far right is lost.</p>

<p>The &#8220;Above average spending / Below average life expectancy&#8221; labels on the quadrants are <em>really</em> helpful, but, again, it reinforces Uberti&#8217;s point, that scatter plots are tricky to read. Should those labels really be necessary? Without them, would someone be able to glance at the scatter chart and &#8220;get it&#8221;?</p>

<p>For quick scanning, the original chart really does showcase the extraordinary amount the US spends on healthcare relative to other countries. And that&#8217;s the benefit of these table-graphics: <strong>Slopes are easy to read.</strong></p>

<h3 id='speed_per_dollar'>Speed Per Dollar</h3>

<p>Back in July of 2007 (I know: we&#8217;re going back in time a bit, but this chart diverges even more from Tufte&#8217;s than the others, and I wanted to build up to it), a designer at online driving magazine <a href='http://windingroad.com'>WindingRoad.com</a> developed the &#8220;Speed per Dollar&#8221; index:</p>
<img src='/images/slopegraphs/spd_original.jpg' style='width:500px' />
<p>Again, what we have is, essentially, an Inselberg-style parallel-coordinates plot, with a Fry-style forced-rank. In this case, though, each step of the progression leads us through the math, to the conclusion at the right-side of the chart: dollar-for-dollar, your best bet is the <a href='http://www.arielatom.com/north-america/'>Ariel Atom</a>.</p>
<img src='/images/slopegraphs/ariel_atom.jpg' style='width:500px' />
<p>Homina homina homina.</p>

<p>Anyway, this chart uses slopes to carry meaning, hence its inclusion here, but I think it&#8217;s different enough from the table-chart Tufte developed in 1983 that it isn&#8217;t <em>quite</em> in the same family.</p>

<p>Dave Nash, a &#8220;kindly contributor&#8221; at Tufte&#8217;s forum then refined the chart, making aspects of it clearer and more Tuftian (original graphic on top, Nash&#8217;s on bottom):</p>
<img src='/images/slopegraphs/spd_nash.png' style='width:500px' />
<p>(I like how the original included the math at the top of the chart, showing how the <acronym>SPD</acronym> value was derived, and I like how it highlights the final column, drawing the eye to the conclusions, but I do think Nash&#8217;s shows the data better.)</p>

<h3 id='cancer_survival_rates'>Cancer Survival Rates</h3>

<p>We&#8217;ll close with the last example of these table-charts I&#8217;ve found (and I&#8217;ve looked for others; if you know any others, let me know: (<a href='mailto:charlie@pearbudget.com'>charlie@pearbudget.com</a>).</p>

<p>This one&#8217;s from Tufte himself. It shows cancer survival rates over 5-, 10-, 15-, and 20-year periods.</p>
<img src='/images/slopegraphs/cancer_survival_nash.gif' style='width:500px' /><cite><a href='http://www.edwardtufte.com/bboard/q-and-a-fetch-msg?msg_id=0000Jr'>http://www.edwardtufte.com/bboard/q-and-a-fetch-msg?msg_id=0000Jr</a></cite>
<p>Actually, the chart above is a refinement of a Tufte original (2002), done (again) by Kindly Contributor Dave Nash (2003, 2006).</p>

<p>Owing it to being a creation of the man himself, this is most in-line with the table-chart I showed at the very top, from 1983. We can clearly see each item&#8217;s standings on the chart, from one quinquennium to the next. In fact, this rendition of the data is a good illustration of my earlier simplification, that these table-charts are, essentially, minimalist versions of line charts with intra-line labels.</p>

<h2 id='tufte_names_his_creation'>Tufte Names His Creation</h2>

<p>Although it&#8217;s possible that Tufte has used this term in his workshops, the first occasion I can find of the &#8220;table-chart&#8221; having an actual <em>name</em> is <a href='http://www.edwardtufte.com/bboard/q-and-a-fetch-msg?msg_id=0003nk&amp;topic_id=1'>this post from Tufte&#8217;s forums</a> on June 1st, 2011. The name he gives the table-chart: &#8221;<strong>Slopegraphs</strong>&#8221;.</p>

<p>I suspect that we&#8217;ll see more slopegraphs in the wild, simply because people will now have something they can use to refer to the table-chart besides &#8220;that slopey thing Tufte had in <em>Visual Design</em>.&#8221;</p>

<p>But there&#8217;s still a technical problem: How do you <em>make</em> these damn things?</p>

<h2 id='making_slopegraphs'>Making Slopegraphs</h2>

<p>At the moment, both of the canonical slopegraphs were made by hand, in Adobe Illustrator. A few people have made initial efforts at software that aids in creating slopegraphs. It&#8217;s hard, though. If the labels are too close together, they collide, making the chart less legible. A well-done piece of software, then, is going to include collision-detection and account for overlapping labels in some regard.</p>

<p>Here are a few software tools that are currently being developed:</p>

<ul>
<li>Dr. David Ruau has developed a working version of <a href='https://github.com/bobthecat/codebox/blob/master/table.graph.r'>slopegraphs in R</a></li>

<li>Alex Kerin, <a href='http://www.datadrivenconsulting.com/2011/06/slopegraphs-in-tableau/'>slopegraphs in Tableau</a></li>

<li>Coy Yonce, <a href='http://coyyonce.com/2011/06/my-adventure-in-creating-slopegraphs-with-crystal-reports-attempt-one/'>slopegraphs in Crystal Reports</a> and <a href='http://coyyonce.com/2011/06/another-attempt-at-creating-slopegraphs-in-crystal-reports/'>slopegraphs in Crystal Reports Enterprise</a></li>

<li>I started developing a <a href='https://github.com/charliepark/slopegraph/blob/master/slopegraph.html'>slopegraphs in Javascript / Canvas</a> version, but probably won&#8217;t continue it, and will try to use the Google Charts&#8217; <acronym>API</acronym> if I try again. The &#8220;jaggies&#8221; on the lines were too rough for me. (I only include it here in case anyone is interested in running with what I&#8217;ve stubbed out.)</li>
</ul>

<p>In each case, if you use the chart-making software to generate a slopegraph, attribute the software creator.</p>

<p>With this many people working on software implementations of slopegraphs, I expect to see a large uptick in slopegraphs in the next few months and years. But &#8230; <em>when</em> should people use slopegraphs?</p>

<h2 id='when_to_use_slopegraphs'>When to Use Slopegraphs</h2>

<p>In <a href='http://www.edwardtufte.com/bboard/q-and-a-fetch-msg?msg_id=0003nk&amp;topic_id=1'>Tufte&#8217;s June 1st post</a>, he sums up the use of slopegraphs well: &#8220;Slopegraphs compare changes over time for a list of nouns located on an ordinal or interval scale.&#8221;</p>

<p>Basically: <strong>Any time you&#8217;d use a line chart to show a progression of univariate data among multiple actors over time, you might have a good candidate for a slopegraph.</strong> There might be other occasions where it would work as well. Note that strictly by Tufte&#8217;s June 1st definition, none of the examples I gave (Baseball, Life Expectancy, Speed-per-Dollar) count as slopegraphs.</p>

<p>But some situations clearly would benefit from using a slopegraph, and I think Tufte&#8217;s definition is a good one until more examples come along and expand it or confirm it.</p>

<p><strong>An example of a good slopegraph candidate:</strong> In my personal finance webapp <a href='https://pearbudget.com'>PearBudget</a>, we&#8217;ve relied far more on tables than on charts. (In fact, the only chart we include is a &#8220;sparkbar&#8221; under each category&#8217;s name, showing the amount of money available in the current month.) We&#8217;ve avoided charts in general (and pie charts in particular, unlike every other personal finance webapp), but I&#8217;m considering adding a visual means of comparing spending across years &#8212; how did my spending on different categories <em>this</em> June compare with my spending on those categories in June of 2010? Did they all go up? Did any go down? Which ones changed the most? <strong>This would be a great situation in which to use a slopegraph.</strong> (If I do implement them, I&#8217;ll be sure to post a follow-up with screenshots and an explanation of how I got them to work.)</p>

<h2 id='slopegraph_best_practices'>Slopegraph Best Practices</h2>

<p>Because slopegraphs don&#8217;t have a lot of uses in place, best practices will have to emerge over time. For now, though &#8230;</p>
<ul>
<li>Be clear &mdash; first to yourself, then to your reader &mdash; whether your numbers are displaying the items in order or whether they&rsquo;re on an actual scale.
<ul>
<li>Note how on Tufte&rsquo;s original chart, Belgium and Canada have the same left-side value (35.2), but are placed at different vertical positions (ordinal), but how the cancer survival chart positions Kidney and Colon cancers &mdash; both with the same left-side value (62) &mdash; at the same vertical point.</li>
<li>An important consideration: is the primary purpose of the chart to show the relative rate of change for each item over time? The absolute values for each item? Both pieces of information? Knowing this will help you make decisions about scaling and labeling.</li>
</ul>
</li>
<li>If the datapoints or labels are bunching up, expand the vertical scale as necessary.</li>
<li>Left-align the names of the items on both the left-hand and right-hand axes, to make vertical scanning of the items&#8217; names easier.</li>
<li>Include both the <em>names</em> of the items and their <em>values</em> on both the left-hand and right-hand axes.</li> 
<li>Use a thin, light gray line to connect the data. A too-heavy line is unnecessary and will make the chart harder to read.</li>
<li>But: When a chart features multiple slope intersections (like the baseball or speed-per-dollar charts above), judicious use of color can avoid what Ben Fry describes as the "pile of sticks" phenomenon (<em><a href='http://www.amazon.com/gp/product/0596514557/ref=as_li_ss_tl?ie=UTF8&tag=charpark-20&linkCode=as2&camp=217145&creative=399369&creativeASIN=0596514557'>Visualizing Data</a></em>, 121).</li>
<li>A table (with more statistical detail) might be a good complement to use alongside the slopegraph. As Tufte <a href='http://www.edwardtufte.com/bboard/q-and-a-fetch-msg?msg_id=0003nk&amp;topic_id=1'>notes</a>: &#8220;The data table and the slopegraph are colleagues in explanation not competitors. One display can serve some but not all functions.&#8221;</li>
<li>Defer to current best practices outlined by Tufte, Stephen Few, and others, including maximizing data-to-ink ratios, minimizing chartjunk, and so on.
<ul>
<li>The 45&deg; rule doesn't apply to slopegraphs, obviously.</li>
<li>For a refresher on other data visualization best practices, the <a href='http://idmg.berkeley.edu/download/IDMG-SummerSeries-06-01-2010-TufteInTwentyMinutes.pdf'>Tufte in Twenty</a> <acronym>PDF</acronym> by Pamela Brown and Russ Acker is particularly good. Other summarized resources are listed at the <a href='http://aaude.org/atd'>Association of American Universities Data Exchange</a> site.</li>
</ul>
</li>
</ul>
<h2 id='wrapping_up'>Wrapping Up</h2>

<p>That&#8217;s about it for now. I&#8217;ll try to update this post as more examples surface.</p>

<p>I would like to thank Matt Frost, David Ruau, and Edward Tufte for reading drafts of this article, and to the commenters on <a href='http://www.edwardtufte.com/bboard/'>the edwardtufte.com forums</a> for their enlightening posts over the years.</p>

<p>If you see a slopegraph out in the wild, or if you have any feedback on this post, shoot me a note on Twitter (<a href='http://twitter.com/charliepark'>@charliepark</a>) or by e-mail (<a href='mailto:charlie@pearbudget.com'>charlie@pearbudget.com</a>). I look forward to learning more from you.</p>
			</div>
		</content>
	</entry>
	
	<entry>
		<title>Fear-Driven Development</title>
		<link href="/fear-driven-development" />
		<id>/fear-driven-development</id>
		<published>2011-06-26T00:00:00-04:00</published>
		<updated>2011-06-26T00:00:00-04:00</updated>
		<content type="xhtml">
			<div xmlns="http://www.w3.org/1999/xhtml">
				<p>A useful heuristic I&#8217;ve been using lately for determining where I should focus my attention:</p>
<blockquote>
<p>What are you most afraid of?</p>
<p>What would it take for that fear to be eliminated?</p>
<p>That's what you should be working on.</p>
</blockquote>
<p>I call it <strong>Fear-Driven Development</strong>.</p>

<p>I wanted to write more, but I was afraid I&#8217;d just keep fiddling with it and wouldn&#8217;t actually get this posted. So here you go.</p>
			</div>
		</content>
	</entry>
	
	<entry>
		<title>Jekyll + Plugins + Github + You</title>
		<link href="/jekyll-with-plugins" />
		<id>/jekyll-with-plugins</id>
		<published>2011-06-15T00:00:00-04:00</published>
		<updated>2011-06-15T00:00:00-04:00</updated>
		<content type="xhtml">
			<div xmlns="http://www.w3.org/1999/xhtml">
				<p>Github&#8217;s <a href='http://pages.github.com/'>Pages</a> is a great &#8220;it just works&#8221; resource.</p>

<p>Except for when it doesn&#8217;t work.</p>

<p>So, for some reason, tags aren&#8217;t fully-implemented in <a href='http://jekyllrb.com/'>Jekyll</a>. They <em>kind of</em> work, but there&#8217;s no tag archive page. I went over this in my post on <a href='http://charliepark.org/tags-in-jekyll/'>getting tags to work in Jekyll</a>. The problem with that, though, is that <strong>Github disables any plugins you&#8217;re using when it processes/creates your blog</strong> (that&#8217;s what the <code>--safe</code> tag does).</p>

<p><strong>How, then, do you get your blog (with tags) to load up on Github?</strong></p>

<p><em>(I&#8217;m operating under the assumption here that you already have a Jekyll-powered blog set up on Github Pages, such that when you push commits to Github, it regenerates your blog for you.)</em></p>

<p>I&#8217;m going to lay out how to do this, and then how to automate the whole process so you can do it in just a few keystrokes.</p>

<h3 id='1_split_your_blog_in_two'>1. Split Your Blog in Two</h3>

<p>The first step is to clone your repo into a duplicate local copy. In my case, I took my local copy <code>~/applications/charliepark.github.com</code> and cloned it to <code>~/applications/charliepark.github.com.raw</code>.</p>

<p>This leaves you with the &#8220;raw&#8221; directory and the original directory (both identical).</p>

<h3 id='2_remove_your_old_content'>2. Remove Your Old Content</h3>

<p>In Finder, go into your original directory (again, in my case: <code>~/applications/charliepark.github.com</code>) and delete all of the content. You do <em>not</em> want to do this via the command line, as it&#8217;ll either be tedious (you&#8217;d need to remove each directory / file) or it&#8217;ll be too aggressive, and you&#8217;ll lose your .git directory. The point here: <strong>You don&#8217;t want to lose your .git directory, as that&#8217;s how your local copy will talk to your repo at Github.</strong></p>

<p>You should now have the &#8220;raw&#8221; directory (again, a clone of what you have at Github) and the now-empty (apart from your .git directory) original repo.</p>

<h3 id='3_regenerate_your_blog_in_the_raw_directory'>3. Regenerate Your Blog, in the &#8220;raw&#8221; Directory</h3>

<p>This is pretty straightforward. Just <code>cd</code> to the raw directory &#8230; in my case:</p>

<pre><code>cd ~/applications/charlie.github.com.raw</code></pre>

<p>&#8230; and run the <code>jekyll</code> command.</p>

<p>This will regenerate your blog, in the <code>~/applications/charlie.github.com.raw/_site</code> directory. You&#8217;ve probably already done this step once or twice before. (Note: You <em>don&#8217;t</em> want to run <code>jekyll --server</code>, as the point here is just to generate the blog, not to fire up a server.)</p>

<h3 id='4_copy_the__directory_over_to_your_original_repo'>4. Copy the <code>_site</code> Directory Over To Your Original Repo</h3>

<p>This is simple.</p>

<pre><code>cp -r ~/applications/charliepark.github.com.raw/_site/* ~/applications/charliepark.github.com</code></pre>

<p>Once you&#8217;ve run that command, you&#8217;ll now have:</p>

<ol>
<li>Your &#8220;raw&#8221; directory</li>

<li>A subdirectory within the &#8220;raw&#8221; directory (<code>_site</code>), with the generated <abbr>HTML</abbr></li>

<li>Your original directory, whose contents should now mirror the <code>_site</code> subdirectory of the &#8220;raw&#8221; directory</li>
</ol>

<h3 id='5_add_nojekyll'>5. Add .nojekyll</h3>

<p>When you add a file titled <code>.nojekyll</code> to your repo, Github won&#8217;t process your files as Jekyll files. I don&#8217;t think this step is strictly necessary, as we&#8217;re just sending the straight-up <abbr>HTML</abbr> files. But it can&#8217;t hurt. In your original directory (<code>~/applications/charliepark.github.com</code>), run:</p>

<pre><code>touch .nojekyll</code></pre>

<h3 id='6_commit_and_push_your_repo'>6. Commit and Push Your Repo</h3>

<p>Add the files to your original directory&#8217;s git repo:</p>

<pre><code>git add .</code></pre>

<p>Commit the new version of the repo:</p>

<pre><code>git commit -am &quot;Converts to flat HTML files.&quot;</code></pre>

<p>(Note: Your commit flags (<code>-am</code>) might differ from mine.)</p>

<p>Push the code to Github:</p>

<pre><code>git push</code></pre>

<h3 id='7_your_site_should_be_live'>7. Your Site Should Be Live</h3>

<p>You can now go to your site (http://yourusername.github.com) and see your site.</p>

<h3 id='8_automate_the_whole_thing'>8. Automate The Whole Thing</h3>

<p>Once you&#8217;ve checked that it works, and that everything&#8217;s okay, it&#8217;s a good idea to automate the whole thing.</p>

<p>I added a shortcut to my <code>~/.bash_profile</code> file:</p>

<pre><code>alias build_blog=&quot;cd ~/applications/charliepark.github.com.raw; jekyll;cp -r ~/applications/charliepark.github.com.raw/_site/* ~/applications/charliepark.github.com;cd ~/applications/charliepark.github.com;git add .;git commit -am &#39;Latest build.&#39;;git push&quot;
alias bb=&quot;build_blog&quot;</code></pre>

<p>So, now, once I&#8217;ve written a new post, or edited a post, or just want to get the site refreshed for some other reason, all I have to do in my command line is type <code>bb</code>, and it&#8217;ll regenerate the site, copy it over, run the git commits, and push it live to Github. I can now finish my post and then push it live to the site in about a second.</p>

<p>And it has <a href='http://charliepark.org/archives#tags'>tags</a>.</p>

<h3 id='corrections'>Corrections?</h3>

<p>I&#8217;m always half-expecting that some aspect of one of my writeups is totally broken. If you try this and have any issues, let me know (<a href='http://twitter.com/charliepark'>@charliepark</a>). Similarly, if you try it and it works, let me know.</p>
			</div>
		</content>
	</entry>
	
	<entry>
		<title>Benchmarking Date.today and Time.now in Ruby</title>
		<link href="/benchmarking-date.today-and-time.now-in-ruby" />
		<id>/benchmarking-date.today-and-time.now-in-ruby</id>
		<published>2011-06-15T00:00:00-04:00</published>
		<updated>2011-06-15T00:00:00-04:00</updated>
		<content type="xhtml">
			<div xmlns="http://www.w3.org/1999/xhtml">
				<p>There are often times when I can handle a programming issue in one of two (or more) ways. Dealing with Time / Date objects is one of those situations.</p>

<p>For example, if you want to know what day today is, you can either fetch Date.today.day or Time.now.day.</p>

<p>In my head, Date is a much simpler concept than Time. After all, Time deals with things like milliseconds and Epochs and things like that, where Date &#8230; well, I woke up this morning, and it was today&#8217;s date. And when I get up tomorrow, it&#8217;ll be tomorrow&#8217;s date. &#8220;Date&#8221; seems much more tangible.</p>

<p>I was curious, though, to know if there was a difference in how quickly Ruby could process the two. So I ran a test.</p>

<h3 id='the_first_test'>The First Test</h3>

<p>I was in a Rails app, so I fired up script/console, and added the following code:</p>

<pre><code>require &#39;benchmark&#39;

Benchmark.ms { 1000.times { puts Time.now } }

Benchmark.ms { 1000.times { puts Date.today } }</code></pre>

<h3 id='the_results'>The Results</h3>

<p>What I found was really interesting.</p>

<p>I ran the test a couple of times, and the average processing time for Time.now was 104 ms. The average processing time for Date.today was 251 ms.</p>

<p>That means it took Date.today about two and a half times as long to get processed than Time.now.</p>

<h3 id='the_second_test'>The Second Test</h3>

<p>I was curious to see if those results would hold if I ran a more complicated test. So I made the processing a tiny bit trickier:</p>

<pre><code>def month_name_t(month = Time.now.month)
  Date::MONTHNAMES[month]
end
Benchmark.ms { 1000.times { month_name_t } }

def month_name_d(month = Date.today.month)
  Date::MONTHNAMES[month]
end
Benchmark.ms { 1000.times { month_name_d } }</code></pre>

<h3 id='more_results'>More Results</h3>

<p>This time around, the difference was even more pronounced.</p>

<p>On average, month_name_t (Time.now) took 2 ms. And month_name_d (Date.today) took 80 ms.</p>

<p>So when we made the function just a bit more complex, it increased the processing time dramatically: <strong>Date.today took 40 times as long to process as Time.now.</strong></p>

<h3 id='the_conclusion'>The Conclusion</h3>

<p><strong>When you&#8217;re processing Times and Dates in your app, and you don&#8217;t <em>need</em> to use the Date object for some reason, use Time.</strong></p>
			</div>
		</content>
	</entry>
	
	<entry>
		<title>The old homepage</title>
		<link href="/the-old-homepage" />
		<id>/the-old-homepage</id>
		<published>2011-06-08T00:00:00-04:00</published>
		<updated>2011-06-08T00:00:00-04:00</updated>
		<content type="xhtml">
			<div xmlns="http://www.w3.org/1999/xhtml">
				<p>Just for posterity, I wanted to save / link to a copy of the old <a href='http://charliepark.org'>charliepark.org</a>.</p>

<p>So it&#8217;s now here: <a href='http://charliepark.org/oldindex.html'>oldindex.html</a>.</p>
			</div>
		</content>
	</entry>
	
	<entry>
		<title>Tags In Jekyll</title>
		<link href="/tags-in-jekyll" />
		<id>/tags-in-jekyll</id>
		<published>2011-06-07T00:00:00-04:00</published>
		<updated>2011-06-07T00:00:00-04:00</updated>
		<content type="xhtml">
			<div xmlns="http://www.w3.org/1999/xhtml">
				<div class='update_box'>
<p><strong>Update:</strong> This won&rsquo;t work if you&rsquo;re using Github pages to serve up your blog, as <a href='https://github.com/mojombo/jekyll/issues/325'>Github disables plugins.</a> You can still generate the site locally, commit it to your repo, and Github will serve it up. (That&rsquo;s what I&rsquo;m doing here.)</p>
</div>
<p>When I decided to convert my blog over to Jekyll, I was pretty excited about it. It seemed to offer the right balance between power and simplicity.</p>

<p>I realized pretty soon, though, that one of the main features I wanted to implement &#8211; tagging &#8211; isn&#8217;t well-supported in Jekyll.</p>

<p>I figured out how to get it working, though, and wanted to share what I came up with.</p>

<h2 id='the_problem'>The Problem</h2>

<p>I shouldn&#8217;t say that Jekyll doesn&#8217;t support tagging. It does. In the sense that you can add tags to a post.</p>

<p>But one of the necessary pages on a blog with tags is the tag archive page, where the blog automatically collects all posts tagged with &#8220;rails&#8221; or &#8220;experiments&#8221; or &#8220;recipes&#8221; or whatever.</p>

<p>For some reason, Jekyll doesn&#8217;t automatically produce those pages.</p>

<h2 id='the_process'>The Process</h2>

<p>I looked at a number of different blogs, and at the source code for a number of different Jekyll-powered blogs. I also poked around at Stack Overflow and Google Groups. They were useful in that they pointed me in the right direction. But all assumed more familiarity with Jekyll than I have, or they had some other issue that prevented my &#8220;getting it&#8221;.</p>

<p>Eventually, I figured out how to make it work, mainly by abusing some &#8220;Categories in Jekyll&#8221; code that others had put online. My approach ended up being almost identical to some code I found at <a href='http://brizzled.clapper.org/id/105/index.html'>http://brizzled.clapper.org/id/105/index.html</a>. In fact, I might have inadvertently lifted his code wholesale.</p>

<p>But nowhere in my escapades of ignorance did I find anyone who had written up an explanation of exactly what to do, where. So here you go.</p>

<h2 id='the_solution'>The Solution</h2>

<p>Jekyll recognizes tags out of the box. In your post&#8217;s <abbr>YAML</abbr> frontmatter, add tags like this:</p>

<pre><code>tags:
- jekyll
- code</code></pre>

<p>That sets up the post to have tags. To get the tags pulled onto a page, create two files:</p>

<pre><code>_layouts/tag_index.html</code></pre>

<p>and</p>

<pre><code>_plugins/_tag_gen.rb</code></pre>

<p>You probably already have a layouts directory, but you might need to add the plugins one. The tag_index.html file is necessary for the tag_gen.rb script to actually run.</p>

<p>In the tag_index file, put this:</p>

<pre><code>---
layout: default
---
&lt;h2 class=&quot;post_title&quot;&gt;Tags In Jekyll&lt;/h2&gt;
&lt;ul&gt;
  {.% for post in site.posts %}
  {.% for tag in post.tags %}
  {.% if tag == page.tag %}
  &lt;li class=&quot;archive_list&quot;&gt;
    &lt;time style=&quot;color:#666;font-size:11px;&quot; datetime=&#39;&#39;&gt;&lt;/time&gt; &lt;a class=&quot;archive_list_article_link&quot; href=&#39;&#39;&gt;&lt;/a&gt;
    &lt;p class=&quot;summary&quot;&gt;
    &lt;ul class=&quot;tag_list&quot;&gt;
      
    &lt;/ul&gt;
  &lt;/li&gt;
  {.% endif %}
  {.% endfor %}
  {.% endfor %}
&lt;/ul&gt;</code></pre>

<p><em>Note: In some of the lines up there, it has a &#8220;{.%&#8221; &#8230; get rid of that period between the curly bracket and the percent sign.</em></p>

<p><strong>What that does:</strong> When this page is created (more on that in a sec), it&#8217;ll have a specific tag assigned to it. That is, multiple pages will be created, each with their own official tag. This goes through every post in the site, and if the post has a tag that matches the tag for the page that&#8217;s being generated, the post is then listed, along with its publication date and summary. Obviously, if your posts don&#8217;t include a summary, you can leave that line off. Or, if there&#8217;s some other bit of metadata you want to include, you can add it into the layout.</p>

<p>In the tag_gen file. put this:</p>

<pre><code>module Jekyll
  class TagIndex &lt; Page
    def initialize(site, base, dir, tag)
      @site = site
      @base = base
      @dir = dir
      @name = &#39;index.html&#39;
      self.process(@name)
      self.read_yaml(File.join(base, &#39;_layouts&#39;), &#39;tag_index.html&#39;)
      self.data[&#39;tag&#39;] = tag
      tag_title_prefix = site.config[&#39;tag_title_prefix&#39;] || &#39;Posts Tagged &amp;ldquo;&#39;
      tag_title_suffix = site.config[&#39;tag_title_suffix&#39;] || &#39;&amp;rdquo;&#39;
      self.data[&#39;title&#39;] = &quot;#{tag_title_prefix}#{tag}#{tag_title_suffix}&quot;
    end
  end
  class TagGenerator &lt; Generator
    safe true
    def generate(site)
      if site.layouts.key? &#39;tag_index&#39;
        dir = site.config[&#39;tag_dir&#39;] || &#39;tag&#39;
        site.tags.keys.each do |tag|
          write_tag_index(site, File.join(dir, tag), tag)
        end
      end
    end
    def write_tag_index(site, dir, tag)
      index = TagIndex.new(site, site.source, dir, tag)
      index.render(site.layouts, site.site_payload)
      index.write(site.dest)
      site.pages &lt;&lt; index
    end
  end
end</code></pre>

<p><strong>What that does:</strong> Essentially, it creates a directory (folder) for each tag in your blog, and creates an index.html file in it. In that index.html file, it plugs in that template we just set up a few minutes ago. For the page title, it&#8217;ll combine the variables &#8220;tag_title_prefix&#8221; and &#8220;tag_title_suffix&#8221;, flanking the tag itself.</p>

<h2 id='thats_it'>That&#8217;s It</h2>

<p>I&#8217;m still learning a lot about Jekyll, and the liquid templating system. But I thought this might be useful to some of you who are considering Jekyll, but for whom tags are a deal-breaker. My entire site is at <a href='http://github.com/charliepark/charliepark.github.com'>http://github.com/charliepark/charliepark.github.com</a>, so if you want to see how I&#8217;m using it (or any tweaks I&#8217;ve made since posting this), you can check them out there.</p>
			</div>
		</content>
	</entry>
	
</feed>